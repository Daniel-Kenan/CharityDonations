<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donation Status</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">
    <div class="bg-white shadow-md rounded-lg p-8 max-w-md text-center">
        <div class="text-2xl font-bold mb-4" id="message"></div>
        <div class="text-lg" id="emoji"></div>
        <a href="/" class="mt-6 inline-block px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition duration-300">Go Back</a>
    </div>

    <script>

function sendEmail() {
    const urlParams = new URLSearchParams(window.location.search);
    const now = new Date();
    // Get current date
    const date = now.toLocaleDateString(); // Format: MM/DD/YYYY

    // Get current time
    const time = now.toLocaleTimeString(); // Format: HH:MM:SS AM/PM
    let tmp  = `Date: ${date} <br> Time: ${time}`
    const emailData = {
        email: urlParams.get("email"),  // Replace with the recipient's email
        message: `Thank you for donating R${amount} to our Campaign at  ${tmp} This is much appreciated`  // Replace with your custom message
    };

    fetch('https://ai.nextgensell.com/send-email', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(emailData),
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();  
    })
    .then(data => {
        console.log('Success:', data);  
    })
    .catch((error) => {
        console.error('Error:', error); 
    });
}

        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const status = urlParams.get('status'); // Use 'status' as the parameter name

        const messageDiv = document.getElementById('message');
        const emojiDiv = document.getElementById('emoji');

        // Check the status and display the appropriate message
        if (status === 'success') {
            messageDiv.innerHTML = "Thank you for your donation! Your support means a lot to us.";
            messageDiv.classList.add('text-green-500');
            emojiDiv.innerHTML = "ðŸ˜Š";
            sendEmail();
        } else if (status === 'failed') {
            messageDiv.innerHTML = "Unfortunately, your donation could not be processed.";
            messageDiv.classList.add('text-red-500');
            emojiDiv.innerHTML = "ðŸ˜¢";
        } else {
            messageDiv.innerHTML = "Invalid status.";
            messageDiv.classList.add('text-gray-500');
        }

       



    </script>
</body>
</html>
